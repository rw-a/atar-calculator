"use strict";(self.webpackChunkatar_calculator=self.webpackChunkatar_calculator||[]).push([[834],{3834:function(t,e,i){i.r(e),i.d(e,{default:function(){return j}});var s=i(885),n=i(7762),o=i(2982),a=i(5671),r=i(3144),h=i(136),l=i(8557),u=i(2791),c=i(1712),d=i.n(c),b=i(8588),p=i(3898),f=i(6951),g=i(184),v=["steelblue","orangered","#05b378","darkviolet","orange","brown","magenta"],y=[-9,103,113,-6];d().Options.text.cssDefaultStyle="z-index: 0",d().Options.text.highlightCssDefaultStyle="";var j=function(t){(0,h.Z)(i,t);var e=(0,l.Z)(i);function i(){return(0,a.Z)(this,i),e.apply(this,arguments)}return(0,r.Z)(i,[{key:"componentDidMount",value:function(){this.board=d().JSXGraph.initBoard("jsxgraph",{axis:!0,maxFrameRate:30,boundingbox:y,maxboundingbox:[-100,200,200,-100],showCopyright:!1,showInfobox:!1,zoom:{factorX:1.25,factorY:1.25,wheel:!0,needShift:!1,min:1,max:50,pinchHorizontal:!1,pinchVertical:!1,pinchSensitivity:7},pan:{enabled:!0,needTwoFingers:!1,needShift:!1},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"0px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"0px"}}),this.legend=d().JSXGraph.initBoard("jsxlegend",{boundingbox:[0,120,20,0],maxFrameRate:1,registerEvents:!1,showCopyright:!1,showInfobox:!1,showNavigation:!1,zoom:{factorX:1,factorY:1,wheel:!1,needShift:!0,min:1,max:1,pinchHorizontal:!1,pinchVertical:!1,pinchSensitivity:7},pan:{enabled:!1,needTwoFingers:!0,needShift:!0}}),this.addZoomLevelListeners(),this.createMouseCoordinates(),this.originalObjects=(0,o.Z)(this.board.objectsList),this.points=[],this.subjects=[],this.year=2022,this.componentDidUpdate()}},{key:"clearBoard",value:function(){for(var t=(0,o.Z)(this.board.objectsList),e=t.length-1;e>=0;e-=1){var i=t[e];("line"===i.elType||"curve"===i.elType||"text"===i.elType&&i.htmlStr.length>3&&"mouseCoordinates"!==i.visProp.cssclass||"point"===i.elType&&null!==i.Xjc||!this.originalObjects.includes(i))&&this.board.removeObject(i.id)}}},{key:"plotScalingFunctions",value:function(){var t,e=this,i=(0,n.Z)(this.subjects.entries());try{var o=function(){var i=(0,s.Z)(t.value,2),n=i[0],o=i[1],a=(0,f.bZ)(e.props.year),r=a[o].a,h=a[o].b,l=a[o].c;e.board.create("functiongraph",[function(t){return r/(1+Math.exp(-h*(t-l)))},0,100],{strokeColor:v[n%v.length]}).hasPoint=function(t,e){return!1}};for(i.s();!(t=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}},{key:"clearLegend",value:function(){for(var t=(0,o.Z)(this.legend.objectsList),e=t.length-1;e>=0;e-=1){var i=t[e];this.legend.removeObject(i.id)}}},{key:"createLegend",value:function(){var t=this.subjects.map((function(t){return p[t]})),e=t.reduce((function(t,e){return t.length>e.length?t:e})),i=9*Math.ceil(e.length/12)+10,s=this.legend.create("legend",[0,100],{labels:t,colors:v,rowHeight:i}).lines.at(-1).getTextAnchor().scrCoords.at(-1)+i+this.maxWidth/30;document.getElementById("jsxlegend").style.top="".concat(this.graphHeight-s,"px"),this.legend.resizeContainer(110,s,!1,!0)}},{key:"plotPoints",value:function(){var t,e=this.board.getBoundingBox(),i=(y[2]-y[0])/(e[2]-e[0])>=1.7,s=(0,n.Z)(this.subjects);try{for(s.s();!(t=s.n()).done;){var o=t.value,a=this.props.subjects[o];if(a){var r=(0,b.lT)(a,o,this.props.year),h=this.board.create("point",[a,r],{face:"cross",name:p[o],withLabel:!0});h.label.setAttribute({offset:[10,-4]}),i||h.setAttribute({withLabel:!1}),h.hasPoint=function(t,e){return!1},this.points.push(h)}}}catch(l){s.e(l)}finally{s.f()}}},{key:"addZoomLevelListeners",value:function(){var t=this;this.subjectsWithLabels=[];var e=0;this.board.on("boundingbox",(function(){var i=t.board.getBoundingBox(),s=(y[2]-y[0])/(i[2]-i[0]);s.toFixed(3)!==e.toFixed(3)&&(t.autoHideSubjectLabels(),t.isMobile&&function(t,e,i){return t>=i?e<i:e>i}(s,e,10)&&(document.getElementById("jsxlegend").style.display=s>=10?"none":""),e=s)}))}},{key:"autoHideSubjectLabels",value:function(){var t=this;function e(t){return[t.label.coords.scrCoords[1],t.label.coords.scrCoords[2],t.label.rendNode.offsetWidth,t.label.rendNode.offsetHeight]}function i(t,e){var i,o=(0,s.Z)(t,4),a=o[0],r=o[1],h=o[2],l=o[3],u=(0,n.Z)(e);try{for(u.s();!(i=u.n()).done;){var c=(0,s.Z)(i.value,4),d=c[0],b=c[1],p=c[2],f=c[3];if((a>=d&&a<=d+p||a+h>=d&&a+h<=d+p||d>=a&&d<=a+h||d+p>=a&&d+p<=a+h)&&(r>=b&&r<=b+f||r+l>=b&&r+l<=b+f||b>=r&&b<=r+l||b+f>=r&&b+f<=r+l))return!1}}catch(g){u.e(g)}finally{u.f()}return!0}var o,a=[],r=(0,n.Z)(this.subjectsWithLabels);try{for(r.s();!(o=r.n()).done;){var h=o.value;a.push(e(h))}}catch(g){r.e(g)}finally{r.f()}this.board.suspendUpdate();var l,u=(0,n.Z)(this.points);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(!this.subjectsWithLabels.includes(c)){var d=e(c);this.subjectsWithLabels.length<1||i(d,a)?(c.setAttribute({withLabel:!0}),this.subjectsWithLabels.unshift(c),a.push(d)):c.hasLabel&&c.setAttribute({withLabel:!1})}}}catch(g){u.e(g)}finally{u.f()}var b,p=(0,n.Z)(this.subjectsWithLabels);try{var f=function(){var s=b.value,n=e(s),o=a.filter((function(t){return t[0]!==n[0]||t[1]!==n[1]||t[2]!==n[2]||t[3]!==n[3]}));i(n,o)||(s.setAttribute({withLabel:!1}),a=o,t.subjectsWithLabels=t.subjectsWithLabels.filter((function(t){return t!==s})))};for(p.s();!(b=p.n()).done;)f()}catch(g){p.e(g)}finally{p.f()}this.board.unsuspendUpdate()}},{key:"createMouseCoordinates",value:function(){var t=this,e=this.board.create("point",[0,0],{visible:!1,fixed:!0,size:2,fillColor:"black",highlightFillColor:"black",fillOpacity:.7,highlightFillOpacity:.7,highlightStrokeWidth:0,strokeWidth:0,precision:{touch:0,mouse:0,pen:0}});e.label.setAttribute({offset:[7,13]}),e.label.setAttribute({cssClass:"mouseCoordinates"});var i=[0,0],s=!1,n=function(){if(t.subjects.length<1)return!1;var n=new(d().Coords)(c.COORDS_BY_SCREEN,t.board.getMousePosition(),t.board).usrCoords.slice(1),o=Math.round(n[0]);if(o>=-1&&o<=101){o<=0&&(o=0),o>=100&&(o=100);var a=t.subjects.reduce((function(e,i){return Math.abs((0,b.lT)(o,e,t.props.year)-n[1])<Math.abs((0,b.lT)(o,i,t.props.year)-n[1])?e:i})),r=(0,b.lT)(o,a,t.props.year);s||(t.board.suspendUpdate(),e.showElement(),s=!0);var h=[o,r];if(o===i[0]&&r===i[1])return!1;i=h,t.board.suspendUpdate(),e.moveTo(h),e.setAttribute({name:"(".concat(o.toFixed(0),", ").concat(r.toFixed(2),")")}),t.board.unsuspendUpdate()}else s&&(e.hideElement(),s=!1)};this.board.on("touchstart",n),this.board.on("pointermove",n)}},{key:"clearPoints",value:function(){this.points=[],this.subjectsWithLabels=[];for(var t=(0,o.Z)(this.board.objectsList),e=t.length-1;e>=0;e-=1){var i=t[e];"point"===i.elType&&null!==i.Xjc&&this.board.removeObject(i.id)}}},{key:"componentDidUpdate",value:function(){var t=this;this.board.suspendUpdate(),this.legend.suspendUpdate();var e=(0,o.Z)(this.subjects);this.subjects=Object.keys(this.props.subjects).filter((function(e){return void 0!==t.props.subjects[e]})),this.subjectsHaveChanged=!(JSON.stringify(e)===JSON.stringify(this.subjects)),(this.subjectsHaveChanged||this.year!==this.props.year)&&(this.year=this.props.year,this.clearBoard(),this.subjects.length>0&&this.plotScalingFunctions()),this.subjectsHaveChanged&&(this.clearLegend(),this.subjects.length>0&&this.createLegend()),this.clearPoints(),this.plotPoints(),this.autoHideSubjectLabels(),this.board.unsuspendUpdate(),this.legend.unsuspendUpdate()}},{key:"render",value:function(){return this.isMobile=this.maxWidth<400,this.maxWidth=document.querySelector(".section-inner").getBoundingClientRect().width,this.graphHeight=Math.abs(this.maxWidth*(y[1]-y[3])/(y[2]-y[0])),(0,g.jsxs)("div",{style:{position:"relative"},children:[(0,g.jsx)("div",{id:"jsxgraph",style:{width:this.maxWidth,height:this.graphHeight}}),(0,g.jsx)("div",{id:"jsxlegend",style:{position:"absolute",top:this.graphHeight-250,right:0,width:110,height:this.graphHeight,zIndex:-1}})]})}}]),i}(u.Component)}}]);
//# sourceMappingURL=834.a8f89e14.chunk.js.map